<div class="flex justify-center">
  <div class="w-full xl:w-[1000px] flex flex-col gap-4">
    <mat-card>
      <mat-card-content>
        <h2>CIP 27 - CNFT Community Royalties Standard</h2>

        <form #instructionsForm="ngForm">
          <p>
            Mint CIP-27 Royalties metadata into your policy. For further
            explanations and requiremnts see
            <a target="_blank" href="https://cips.cardano.org/cips/cip27/"
              >https://cips.cardano.org/cips/cip27/</a
            >
          </p>

          <div class="flex flex-col">
            <!-- POLICY -->
            <app-policy-selector
              [createPolicies]="true"
              (changedPolicyId)="changePolicyId($event)"
            >
              <mat-error *ngIf="tokens.length > 0"
                >This policy has already minted
                {{ tokens.length }} tokens</mat-error
              >
            </app-policy-selector>

            <!-- Percent -->
            <mat-form-field appearance="outline">
              <mat-label>Royalties in %</mat-label>
              <input
                matInput
                [(ngModel)]="percent"
                name="percent"
                required
                type="number"
                min="0"
                max="100"
                step="10"
                (input)="inputChanged(percent)"
              />
            </mat-form-field>

            <!-- Address -->
            <mat-form-field appearance="outline">
              <mat-label>Royalties address</mat-label>
              <input
                matInput
                [(ngModel)]="addr"
                name="addr"
                required
                (input)="inputChanged(addr)"
                minlength="59"
              />
            </mat-form-field>
          </div>
        </form>

        <!-- fund instruction-->
        <form #fundForm="ngForm" [hidden]="instructionsForm.invalid">
          <app-fund-account
            #fundAccount
            [activeStep]="true"
            [mintTransaction]="mintTransaction"
            (updateMintTransaction)="buildTransaction()"
            [mintOrderSubmission]="mintOrderSubmission"
          ></app-fund-account>
        </form>
      </mat-card-content>
    </mat-card>

    <div class="flex gap-2">
      <button mat-raised-button color="accent" (click)="updateFunds()">
        <mat-icon>refresh</mat-icon>
        <span> Refresh</span>
      </button>
      <button
        mat-raised-button
        color="primary"
        [disabled]="instructionsForm.invalid || fundForm.invalid"
        (click)="generateCip27()"
      >
        <mat-icon>token</mat-icon>
        <span> Submit</span>
      </button>
    </div>

    <p>
      Need help? Join our
      <a target="_blank" href="https://t.me/joinchat/XrlIF21NDzAyODUy"
        >telegram channel</a
      >!
    </p>
  </div>
</div>
