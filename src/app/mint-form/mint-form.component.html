<mat-card>
    <mat-card-content>

        <h2>{{token.assetName}}</h2>

        <div fxLayout="row" fxLayoutAlign="center center">

            <div class="upload-wrapper">

                <input id="file{{counter}}" fxHide type="file" (change)="addFile($event)" name="file{{counter}}" />
                <label for="file{{counter}}" (drop)="dropFile($event)" (dragover)="$event.preventDefault();">
                    <div [fxHide]="file != null" class="dropArea" fxLayout="column" fxLayoutAlign="center center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="43" viewBox="0 0 50 43">
                            <path d="M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z">
                            </path>
                        </svg>
                        Upload Image, Audio or Video file
                    </div>
                    <div [fxHide]="file == null" class="preview" fxLayout="row" fxLayoutAlign="center center">
                        <img *ngIf="file?.type?.startsWith('image')" [src]="url">
                        <audio *ngIf="file?.type?.startsWith('audio')" controls [src]="url"></audio>
                        <video *ngIf="file?.type?.startsWith('video')" controls [src]="url"></video>
                        <div>
                            <mat-icon class="big-icon" color="primary" *ngIf="!isFileTypeKnown()" fontSet="material-icons-outlined">description
                            </mat-icon>
                        </div>
                    </div>
                </label>
                <mat-progress-bar *ngIf="uploadProgress!=0" mode="determinate" strokeWidth="20" [value]="uploadProgress"></mat-progress-bar>


            </div>

        </div>

        <div fxLayout="row" fxLayoutGap="10px">
            <!-- Asset Name -->
            <mat-form-field fxFlex appearance="outline">
                <mat-label>Asset Name</mat-label>
                <input matInput [(ngModel)]="token.assetName" name="assetName{{counter}}" required pattern="[a-zA-Z0-9-]{1,32}" maxlength="32">
            </mat-form-field>
            <!-- Amount -->
            <mat-form-field fxFlex=25 appearance="outline">
                <mat-label>Amount</mat-label>
                <input matInput type="number" [(ngModel)]="token.amount" name="amount{{counter}}" min=1 required>
            </mat-form-field>
        </div>

        <div fxLayout="column">
            <div *ngFor="let entry of token.metaData | keyvalue" fxLayout="column">
                <!-- Simple Metafield-->
                <mat-form-field *ngIf="!isListField(entry.key)" appearance="outline">
                    <mat-label>{{entry.key}}</mat-label>
                    <input matInput name="{{entry.key}}{{counter}}" maxlength="64" [(ngModel)]="entry.value.value">
                </mat-form-field>
                <!-- List Metafied -->
                <app-chiplist *ngIf="isListField(entry.key)" label="{{entry.key}}" placeholder="add {{entry.key}}..." [(items)]="entry.value.listValue">
                </app-chiplist>
            </div>
        </div>

    </mat-card-content>
    <mat-card-actions>
        <div fxLayout="row">
            <mat-chip-list #chipList multiple>
                <mat-chip *ngFor="let metaField of availableMetaFields" (click)="addMetaField(metaField)" [selected]="!!token.metaData[metaField]">
                    {{metaField}}
                </mat-chip>
            </mat-chip-list>
        </div>
    </mat-card-actions>
</mat-card>