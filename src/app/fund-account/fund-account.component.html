<div fxLayout="column" fxLayoutGap="15px">
    <mat-card>
        <mat-card-content>

            <h2>Fund Account</h2>

            <p>
                <mat-checkbox name="tip" [(ngModel)]="mintOrderSubmission.tip" (change)="emitUpdateMintTransaction()">Give a tip to the [EURO]-Pool pledge</mat-checkbox>
            </p>

            <!-- fund instruction-->
            <p>Please send at least <b matTooltip="{{adaFee}}&nbsp;₳ fees, {{adaMinOutput}}&nbsp;₳ will be sent back to your address, {{adaTip}}&nbsp;₳ will be tipped">{{minAdaBalance | number: '1.0-6'}}&nbsp;₳</b><button class="inline-button" mat-icon-button (click)="copyFunds()"><mat-icon>content_copy</mat-icon></button> to this address</p>


            <p style="text-align: center;" fyLayout="row" fxLayoutAlign="center center" fxLayoutGap="5px">
                <b class="address">{{account.address}}</b>
                <button mat-icon-button (click)="copyAddressToClipboard()">
                    <mat-icon>content_copy</mat-icon>
                </button>
            </p>



            <!-- current balance -->
            <p>
                <span fyLayout="row" fxLayoutAlign="start center" fxLayoutGap="5px">
                    <span>Curent address balance </span>
                    <b>{{adaBalance | number: '1.0-6'}}&nbsp;₳</b>
                    <mat-icon class="green" [fxShow]="adaBalanceInput.valid">done</mat-icon>
                    <mat-icon color="warn" [fxShow]="adaBalanceInput.invalid">dangerous</mat-icon>
                </span>
            </p>

            <!-- tip -->
            <p *ngIf="mintTransaction.mintOrderSubmission.tip && adaTip > 1">
                <span fyLayout="row" fxLayoutAlign="start center" fxLayoutGap="5px">
                    <span>Tip for the [EURO]-Pool pledge</span>
                    <b>{{adaTip | number: '1.0-6'}}&nbsp;₳ Thank You!</b>
                </span>
            </p>

            <!-- receiver address-->
            <mat-form-field *ngIf="false" appearance="outline" style="width: 100%; max-width: 900px;" [fxShow]="account.fundingAddresses.length > 0">
                <mat-label>Send tokens to</mat-label>
                <mat-select placeholder="Select target address" [(ngModel)]="mintOrderSubmission.targetAddress" name="item" (selectionChange)="emitUpdateMintTransaction()">
                    <mat-option *ngFor="let address of account.fundingAddresses" [value]="address">
                        {{address}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <!-- hidden validator -->
            <mat-form-field fxHide>
                <input #adaBalanceInput="ngModel" matInput type="number" [ngModel]="adaBalance" name="adaBalance" [appMinValidator]="minAdaBalance">
            </mat-form-field>
        </mat-card-content>
    </mat-card>
    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start center">
        <button mat-raised-button color="primary" matStepperPrevious>
            <mat-icon>fast_rewind</mat-icon>
            Back
        </button>
        <button mat-raised-button color="accent" (click)="emitUpdateAccount()">
            <mat-icon>refresh</mat-icon>
            Refresh
        </button>
        <button [disabled]="adaBalanceInput.invalid" mat-raised-button color="primary" matStepperNext>
            <mat-icon>fast_forward</mat-icon>
            Proceed
        </button>
    </div>
</div>